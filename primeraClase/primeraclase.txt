# Primera Clase - Sistema de Historia Clínica

## Descripción del Proyecto
Sistema web desarrollado en PHP para la gestión de historias clínicas médicas con integración a base de datos Supabase.

## Características Principales

### 1. Arquitectura del Sistema
- **Backend**: PHP con Composer para gestión de dependencias
- **Base de datos**: Supabase (PostgreSQL)
- **Frontend**: HTML5, CSS3, JavaScript vanilla
- **Dependencias**: Guzzle HTTP, DotEnv

### 2. Funcionalidades Implementadas

#### Consulta de Pacientes
- Búsqueda por número de documento de identidad
- Visualización completa de información del paciente
- Obtención de nombres de EPS y régimen (no solo IDs)
- Cálculo automático de edad basado en fecha de nacimiento

#### Gestión de Historias Clínicas
- Listado de historias clínicas por paciente
- Vista detallada con sistema de acordeón (sin recarga de página)
- Visualización de:
  - Información general (fechas, estado)
  - Motivo de consulta y enfermedad actual
  - Signos vitales completos
  - Examen físico por sistemas
  - Revisión por sistemas
  - Análisis y plan médico

#### Creación de Nuevas Historias
- Formulario completo para nueva historia clínica
- Selección de médico por nombre (no por ID)
- Validación de existencia del paciente
- Creación automática de registros relacionados:
  - Historia clínica principal
  - Consulta médica
  - Signos vitales (opcional)
  - Diagnósticos con códigos CIE-10 (opcional)

### 3. Interfaz de Usuario

#### Diseño Modular con Acordeón
- **Módulo Consulta**: Búsqueda y visualización de pacientes
- **Módulo Creación**: Formulario para nuevas historias
- Sistema de acordeón para organización clara
- Navegación sin recarga de página

#### Características de UX/UI
- Diseño responsive con CSS Grid y Flexbox
- Efectos hover y animaciones suaves
- Ocultación inteligente de secciones vacías
- Iconos descriptivos para mejor navegación
- Colores diferenciados por estado (abierta/cerrada)

### 4. Esquema de Base de Datos Utilizado

#### Tablas Principales
- `pacientes`: Información demográfica completa
- `historias_clinicas`: Registro principal de ingresos
- `consultas`: Motivos y descripciones médicas
- `signos_vitales`: Mediciones clínicas
- `medicos`: Información del personal médico
- `diagnosticos`: Códigos CIE-10 y tipos
- `examen_fisico_hallazgos`: Hallazgos por sistemas
- `revision_por_sistemas`: Revisión sistemática

#### Tablas de Referencia
- `eps`: Entidades promotoras de salud
- `regimen`: Tipos de régimen de salud
- `cie10`: Códigos de diagnóstico internacional
- `tipo_documento`: Tipos de documentos de identidad

### 5. Características Técnicas

#### Seguridad y Configuración
- Variables de entorno con DotEnv
- Service Role Key para acceso completo a datos
- Validación de entrada de datos
- Manejo de errores y excepciones

#### Optimizaciones
- Consultas eficientes con filtros específicos
- Carga bajo demanda de datos relacionados
- Autocompletado de campos cuando hay contexto
- Reutilización de conexiones a base de datos

### 6. Flujo de Trabajo

#### Para Consultar Pacientes
1. Ingresar número de documento en el módulo de consulta
2. Sistema busca y muestra información completa
3. Clic en historia clínica despliega detalles completos
4. Navegación fluida entre diferentes historias

#### Para Crear Historia Clínica
1. Abrir módulo de creación
2. Ingresar documento del paciente (autocompletado si ya consultado)
3. Seleccionar médico de lista desplegable
4. Completar datos obligatorios de consulta
5. Agregar signos vitales y diagnósticos opcionales
6. Sistema valida y crea todos los registros relacionados

### 7. Archivos del Sistema

#### Archivos Principales
- `index.php`: Aplicación principal con toda la lógica
- `style.css`: Estilos completos del sistema
- `SupabaseClient.php`: Cliente para conexión a base de datos
- `.env`: Configuración de variables de entorno

#### Estructura de Directorios
```
pooconphp/
├── primeraClase/
│   ├── index.php
│   ├── style.css
│   └── primeraclase.txt
├── src/
│   └── SupabaseClient.php
├── vendor/ (dependencias Composer)
├── .env
└── composer.json
```

### 8. Tecnologías y Dependencias

#### Dependencias PHP (Composer)
- `guzzlehttp/guzzle`: Cliente HTTP para API REST
- `vlucas/phpdotenv`: Gestión de variables de entorno

#### Características CSS
- CSS Grid para layouts responsivos
- Flexbox para alineación de elementos
- Animaciones CSS para transiciones suaves
- Variables CSS para consistencia de colores

#### JavaScript
- Funciones para acordeón sin recarga
- Manipulación del DOM para interactividad
- Gestión de estados de elementos desplegables

### 9. Casos de Uso Principales

#### Personal Médico
- Consulta rápida de historias de pacientes
- Creación de nuevas consultas y diagnósticos
- Revisión de evolución médica del paciente
- Acceso a información completa en una sola vista

#### Administradores
- Gestión de información de pacientes
- Supervisión de historias clínicas
- Acceso a datos estadísticos básicos

### 10. Mejoras y Características Avanzadas

#### Funcionalidades Implementadas
- Cálculo automático de edad
- Resolución de nombres de EPS y régimen
- Validación de existencia de pacientes
- Ocultación inteligente de secciones vacías
- Navegación contextual entre módulos

#### Optimizaciones de UX
- Formularios con autocompletado
- Mensajes de error descriptivos
- Confirmaciones de acciones exitosas
- Navegación intuitiva sin pérdida de contexto

Este sistema representa una solución completa para la gestión básica de historias clínicas, con enfoque en usabilidad, eficiencia y mantenibilidad del código.